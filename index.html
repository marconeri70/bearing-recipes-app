<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Ricette Lavorazione Cuscinetti</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="styles.css" />

  <!-- jsPDF per PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- JSZip per ZIP (se vuoi usarlo in futuro) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
  <header class="app-header">
    <h1>Ricette Lavorazione Cuscinetti</h1>
    <p>Gestione lavorazioni: IR, OR, sfere, gabbia, grasso, schermi, gioco radiale</p>
  </header>

  <main class="app-main">
    <!-- CRUSCOTTO LAVORAZIONI -->
    <section class="card card-lavorazioni">
      <div class="card-header">
        <div>
          <h2>Lavorazioni</h2>
          <span id="conteggio-lavorazioni" class="sub"></span>
        </div>
        <button id="btn-nuova" class="btn btn-primary">+ Nuova</button>
      </div>

      <div class="toolbar">
        <button id="btn-import" class="btn btn-light">üì• Importa CSV</button>
        <input id="file-import" type="file" accept=".csv" style="display:none" />

        <button id="btn-export-csv" class="btn btn-light">üì§ Esporta CSV</button>
        <button id="btn-export-pdf" class="btn btn-light">üßæ Esporta PDF</button>
      </div>

      <div id="lista-lavorazioni" class="lista-lavorazioni"></div>
    </section>

    <!-- FORM DETTAGLIO -->
    <section id="card-form" class="card card-dettaglio is-hidden">
      <div class="card-header">
        <h2>Dettaglio lavorazione</h2>
        <span id="stato-modifica" class="badge badge-state">Nuova lavorazione</span>
        <button id="btn-scheda-tecnica" class="btn btn-outline" disabled>üìã Scheda tecnica</button>
      </div>

      <form id="form-lavorazione" class="form">
        <div class="form-row">
          <label for="codice">Codice lavorazione *</label>
          <input type="text" id="codice" required />
        </div>

        <div class="form-two-cols">
          <div class="form-row">
            <label for="irTipo">IR - Tipo</label>
            <input type="text" id="irTipo" />
          </div>
          <div class="form-row">
            <label for="irDiametro">Diametro foro IR (mm)</label>
            <input type="number" id="irDiametro" step="0.001" />
          </div>
        </div>

        <div class="form-row">
          <label for="orTipo">OR - Tipo</label>
          <input type="text" id="orTipo" />
        </div>

        <div class="form-two-cols">
          <div class="form-row">
            <label for="diametroSfera">Sfera - Diametro (mm)</label>
            <input type="number" id="diametroSfera" step="0.001" />
          </div>
          <div class="form-row">
            <label for="numeroSfere">Sfera - Numero sfere (n)</label>
            <input type="number" id="numeroSfere" />
          </div>
        </div>

        <div class="form-row">
          <label for="gabbiaTipo">Gabbia - Tipo</label>
          <input type="text" id="gabbiaTipo" />
        </div>

        <div class="form-row">
          <label for="grassoTipo">Grasso - Tipo</label>
          <input type="text" id="grassoTipo" />
        </div>

        <div class="form-row">
          <label for="schermoTipo">Schermo / Tenuta</label>
          <input type="text" id="schermoTipo" />
        </div>

        <div class="form-two-cols">
          <div class="form-row">
            <label for="pesoMin">Peso minimo (g)</label>
            <input type="number" id="pesoMin" step="0.01" />
          </div>
          <div class="form-row">
            <label for="pesoMax">Peso massimo (g)</label>
            <input type="number" id="pesoMax" step="0.01" />
          </div>
        </div>

        <div class="form-row">
          <label for="classeGioco">Gioco radiale - Classe</label>
          <select id="classeGioco">
            <option value="">Seleziona classe‚Ä¶</option>
          </select>
        </div>

        <div class="form-two-cols">
          <div class="form-row">
            <label for="giocoMin">Gioco min (¬µm)</label>
            <input type="number" id="giocoMin" />
          </div>
          <div class="form-row">
            <label for="giocoMax">Gioco max (¬µm)</label>
            <input type="number" id="giocoMax" />
          </div>
        </div>

        <hr />

        <h3>Carica disegno tecnico</h3>

        <div class="form-row">
          <button type="button" id="btn-file-galleria" class="btn btn-light">üìÅ Scegli dalla galleria</button>
          <input type="file" id="file-galleria" accept="image/*" style="display:none" />
        </div>

        <div class="form-row">
          <button type="button" id="btn-file-camera" class="btn btn-light">üì∑ Scatta foto</button>
          <input type="file" id="file-camera" accept="image/*" capture="environment" style="display:none" />
        </div>

        <div class="form-row">
          <label for="disegnoUrl">URL immagine (opzionale)</label>
          <input type="url" id="disegnoUrl" placeholder="Incolla link immagine o Google Drive" />
          <small class="hint">
            Puoi incollare anche un link Google Drive tipo
            <code>https://drive.google.com/file/d/.../view</code>:
            l'app lo converte automaticamente.
          </small>
        </div>

        <div class="preview-box">
          <img id="drawing-image" alt="Disegno tecnico" />
          <div id="drawing-placeholder" class="placeholder">
            Disegno tecnico (preview)
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">üíæ Salva</button>
          <button type="button" id="btn-reset" class="btn btn-light">üßπ Svuota</button>
          <button type="button" id="btn-elimina" class="btn btn-danger" disabled>üóëÔ∏è Elimina</button>
        </div>
      </form>
    </section>
  </main>

  <!-- MODALE SCHEDA TECNICA -->
  <div id="scheda-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <h2 id="scheda-codice"></h2>
          <p id="scheda-sub" class="sub"></p>
        </div>
        <div class="modal-header-actions">
          <button id="scheda-save-pdf" class="btn btn-light">üíæ Salva PDF</button>
          <button id="scheda-close" class="btn btn-icon">‚úñ</button>
        </div>
      </div>

      <div class="modal-body">
        <section class="scheda-section">
          <h3>Dati principali</h3>
          <div class="scheda-grid">
            <div class="scheda-item">
              <span class="label">IR - Tipo</span>
              <span id="scheda-ir" class="value"></span>
            </div>
            <div class="scheda-item">
              <span class="label">OR - Tipo</span>
              <span id="scheda-or" class="value"></span>
            </div>
            <div class="scheda-item">
              <span class="label">Diametro foro IR</span>
              <span id="scheda-ir-diametro" class="value"></span>
            </div>
          </div>
        </section>

        <section class="scheda-section">
          <h3>Rotolamento</h3>
          <div class="scheda-grid">
            <div class="scheda-item">
              <span class="label">Sfere</span>
              <span id="scheda-sfere" class="value"></span>
            </div>
            <div class="scheda-item">
              <span class="label">Gabbia</span>
              <span id="scheda-gabbia" class="value"></span>
            </div>
          </div>
        </section>

        <section class="scheda-section">
          <h3>Lubrificazione &amp; schermatura</h3>
          <div class="scheda-grid">
            <div class="scheda-item">
              <span class="label">Grasso</span>
              <span id="scheda-grasso" class="value"></span>
            </div>
            <div class="scheda-item">
              <span class="label">Schermo / Tenuta</span>
              <span id="scheda-schermo" class="value"></span>
            </div>
          </div>
        </section>

        <section class="scheda-section">
          <h3>Peso &amp; gioco radiale</h3>
          <div class="scheda-grid">
            <div class="scheda-item">
              <span class="label">Peso</span>
              <span id="scheda-peso" class="value"></span>
            </div>
            <div class="scheda-item">
              <span class="label">Gioco radiale</span>
              <span id="scheda-gioco" class="value"></span>
            </div>
          </div>
        </section>

        <section class="scheda-section">
          <h3>Disegno tecnico</h3>
          <div class="scheda-drawing-box">
            <img id="scheda-drawing-image" alt="Disegno tecnico" />
            <div id="scheda-drawing-placeholder" class="placeholder">
              Nessun disegno caricato
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
